---
- hosts: "basic"
  - name: "Baisc requirements"
    import_tasks: "basic_prerequirements.yml"
    tags:
      - basic

- hosts: "basic"
  - name: "Create initial users"
    import_tasks: manageUsers.yml param= "{{ item }}"
      with_items="{{ user_vars }}" 
    ignore_errors: yes
    meta: clear_host_errors  
    tags: 
      - basic

- hosts: "secured"    
  - name: "Manage Users"
    import_tasks: manageUsers.yml param= "{{ item }}"
      with_items="{{ user_vars }}" 
    ignore_errors: yes
    meta: clear_host_errors  
    tags: 
      - secured

  - name: "Secure VPS 1"
    import_tasks: "secureVPS1.yml"
    tags: 
      - basic

- hosts: "secured"
  - name: "Secure VPS 2"
    import_tasks: "secureVPS2.yml"
    tags: 
      - secured
